# StepZen CLI

The StepZen Command Line Interface (CLI) tool enables you to set up and manage StepZen using commands in your command-line shell. 

After you have written or imported your GraphQL schema in the form of a Schema Definition Language (SDL) file, and defined your "configuration" in a YAML files, you can upload and deploy them to StepZen using the StepZen CLI - resulting in a live GraphQL endpoint.

# Installing

`npm install -g stepzen`

# Verifying your installation
To verify your  CLI installation, use the `stepzen --version` command:

`$ stepzen (-v|--version|version)`

----------------------------------------

<!-- toc -->
* [StepZen CLI](#stepzen-cli)
* [Installing](#installing)
* [Verifying your installation](#verifying-your-installation)
* [Usage](#usage)
* [QA from cloned repo](#qa-from-cloned-repo)
* [Commands](#commands)
<!-- tocstop -->
# Usage
<!-- usage -->
```sh-session
$ npm install -g stepzen
$ stepzen COMMAND
running command...
$ stepzen (-v|--version|version)
stepzen/0.20.1 linux-x64 node-v14.20.0
$ stepzen --help [COMMAND]
USAGE
  $ stepzen COMMAND
...
```
<!-- usagestop -->

# QA from cloned repo 
<!-- QA -->
To run from code: `path-to-repo/bin/run start` (start or whatever command you're QAing)
<!-- QAstop -->

# Commands
<!-- commands -->
* [`stepzen deploy [ENDPOINT] [--config=path/to/config.yaml] [--dir=path/to/workspace]

-- OR --

$ stepzen deploy ENDPOINT --schema=schema [--configurationsets=cs1[,cs2[,..]]]`](#stepzen-deploy-endpoint---configpathtoconfigyaml---dirpathtoworkspace---or----stepzen-deploy-endpoint---schemaschema---configurationsetscs1cs2)
* [`stepzen help [COMMAND]`](#stepzen-help-command)
* [`stepzen import SCHEMA`](#stepzen-import-schema)
* [`stepzen list [TYPE]`](#stepzen-list-type)
* [`stepzen login`](#stepzen-login)
* [`stepzen logout`](#stepzen-logout)
* [`stepzen start`](#stepzen-start)
* [`stepzen upload TYPE DESTINATION`](#stepzen-upload-type-destination)

## `stepzen deploy [ENDPOINT] [--config=path/to/config.yaml] [--dir=path/to/workspace]

-- OR --

$ stepzen deploy ENDPOINT --schema=schema [--configurationsets=cs1[,cs2[,..]]]`

deploy to stepzen

```
USAGE
  $ stepzen deploy [ENDPOINT] [--config=path/to/config.yaml] [--dir=path/to/workspace]

  -- OR --

  $ stepzen deploy ENDPOINT --schema=schema [--configurationsets=cs1[,cs2[,..]]]

ARGUMENTS
  ENDPOINT  name of the endpoint (e.g. api/customers)
            [default: use the endpoint property from stepzen.config.json]

OPTIONS
  -h, --help                             show CLI help

  --config=path/to/config.yaml           [default: config.yaml] configuration file to use (relative to the current
                                         directory)

  --configurationsets=configurationsets  name(s) of configuration sets uploaded earlier with stepzen upload

  --dir=dir                              working directory

  --schema=schema                        name of a schema uploaded earlier with stepzen upload

  --silent
```

## `stepzen help [COMMAND]`

Display help for stepzen.

```
USAGE
  $ stepzen help [COMMAND]

ARGUMENTS
  COMMAND  Command to show help for.

OPTIONS
  -n, --nested-commands  Include all nested commands in the output.
```

_See code: [@oclif/plugin-help](https://github.com/oclif/plugin-help/blob/v5.1.12/src/commands/help.ts)_

## `stepzen import SCHEMA`

import a schema for an external data source or an API endpoint to your GraphQL API

```
USAGE
  $ stepzen import SCHEMA

OPTIONS
  -H, --header=header
      [curl, graphql] specifies a request header to pass

      Example:
      stepzen import curl https://example.com/api/customers \
      -H "Authorization: apikey SecretAPIKeyValue"

  -h, --help
      show CLI help

  --db-database=db-database
      [mysql, postgresql] name of database to import

  --db-host=db-host
      [mysql, postgresql] database host

  --db-include=(tables-only|views-only|tables-and-views)
      [mysql, postgresql] Should the generated GraphQL schema be based only on database views, only on tables or on both.

  --db-link-types
      [mysql, postgresql] Automatically link types based on foreign key relationships using @materializer
      (https://stepzen.com/docs/features/linking-types)

  --db-password=db-password
      [mysql, postgresql] database password

  --db-schema=db-schema
      [postgresql] database schema

  --db-user=db-user
      [mysql, postgresql] database user name

  --dir=dir
      working directory

  --header-param=header-param
      [curl, graphql] specifies a parameter in a header value. Can be formed by taking a -H, --header flag and replacing
      the variable part of the header value with a $paramName placeholder. Repeat this flag once for each header with a
      parameter.

      Example:
      stepzen import curl https://example.com/api/customers \
      -H "Authorization: apikey SecretAPIKeyValue" \
      --header-param 'Authorization: apikey $apikey'

  --name=name
      Subfolder inside the workspace folder to save the imported schema files to. Defaults to the name of the imported
      schema.

  --path-params=path-params
      [curl] specifies path parameters in the URL path. Can be formed by taking the original path and replacing the
      variable segments with $paramName placeholders.

      Example:
      stepzen import curl https://example.com/users/jane/posts/12 --path-params '/users/$userId/posts/$postId'

  --prefix=prefix
      [curl, graphql] prefix to add every type in the generated schema.

  --query-name=query-name
      [curl] property name to add to the Query type as a way to access the imported cURL endpoint.

  --query-type=query-type
      [curl] name for the type returned by the cURL endpoint in the generated schema. The name specified by --query-type
      is not prefixed by --prefix if both flags are present.
```

## `stepzen list [TYPE]`

list endpoints, schemas and configuration sets in your StepZen account

```
USAGE
  $ stepzen list [TYPE]

ARGUMENTS
  TYPE
      (endpoints|configurationsets|schemas) [default: endpoints]

      The type of entities to list:
      endpoints - GraphQL API endpoints deployed with stepzen deploy or stepzen start
      schemas - StepZen schemas uploaded with stepzen upload (or stepzen start)
      configurationsets - StepZen configuration sets uploaded with stepzen upload (or stepzen start)

OPTIONS
  -h, --help  show CLI help
```

## `stepzen login`

log in to StepZen

```
USAGE
  $ stepzen login

OPTIONS
  -a, --account=account    StepZen account name (copy from https://stepzen.com/account). If not provided, the CLI
                           prompts the users to enter one.

  -h, --help               show CLI help

  -k, --adminkey=adminkey  Admin key (copy from https://stepzen.com/account) If not provided, the CLI prompts the users
                           to enter one.

  --public                 Create a public anonymous StepZen account and use it. This is handy for trying StepZen out,
                           but it not suitable for handling private data as all endpoints created with a public account
                           will be public.
```

## `stepzen logout`

log out of StepZen

```
USAGE
  $ stepzen logout

OPTIONS
  -h, --help  show CLI help
```

## `stepzen start`

deploy your schema to StepZen, and then redeploy on every change

```
USAGE
  $ stepzen start

OPTIONS
  -h, --help           show CLI help
  --dir=dir            working directory
  --endpoint=endpoint  Override workspace endpoint
  --port=port          [default: 5001]
```

## `stepzen upload TYPE DESTINATION`

upload a schema or a configuration set to StepZen

```
USAGE
  $ stepzen upload TYPE DESTINATION

ARGUMENTS
  TYPE         (configurationset|schema) type
  DESTINATION  destination

OPTIONS
  -h, --help   show CLI help
  --dir=dir    A directory to upload
  --file=file  A file to upload
  --silent
```
<!-- commandsstop -->
